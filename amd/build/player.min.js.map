{"version":3,"file":"player.min.js","sources":["../src/player.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Defines player script.\n *\n * @since      Moodle 2.0\n * @copyright  2023 Moodle India\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'core/str',\n        'media_videojs/video-lazy',\n        'core/ajax'],\n        function($, Str,videojs, Ajax){\n            return {\n                load: function(args){\n                    var values = JSON.parse(args);\n                    const player = videojs(values.identifier);\n                    var myVideoPlayer = document.getElementById('mod_zatuk_form_video');\n                    player.src({\n                        src: values.src,\n                        type: 'application/x-mpegURL'\n                    });\n                     player.hlsQualitySelector({\n                       displayCurrentQuality: true,\n                    });\n                    if(typeof(myVideoPlayer) != 'undefined'  && myVideoPlayer !== null){\n                        myVideoPlayer.onloadedmetadata = function() {\n                        };\n                        myVideoPlayer.addEventListener('loadedmetadata', function () {\n                            $('#zatuk_duration').val(myVideoPlayer.duration.toFixed(0));\n                        });\n                    }\n                    player.on(\"pause\", function() {\n                        var currenttime = player.currentTime();\n                        var lengthOfVideo = player.duration();\n                            var promises = Ajax.call([{\n                                methodname: 'mod_zatukattempts',\n                                args: {\n                                    moduleid:values.cm,\n                                    courseid:values.course,\n                                    duration:lengthOfVideo,\n                                    currenttime: currenttime,\n                                    event:'pause'\n                                },\n                            }]);\n                            promises[0].done(function() {\n                            }).fail(function() {\n                            });\n                    });\n            }\n        };\n    });\n"],"names":["define","$","Str","videojs","Ajax","load","args","values","JSON","parse","player","identifier","myVideoPlayer","document","getElementById","src","type","hlsQualitySelector","displayCurrentQuality","onloadedmetadata","addEventListener","val","duration","toFixed","on","currenttime","currentTime","lengthOfVideo","call","methodname","moduleid","cm","courseid","course","event","done","fail"],"mappings":";;;;;;;AAsBAA,0BAAO,CAAC,SACA,WACA,2BACA,cACA,SAASC,EAAGC,IAAIC,QAASC,YACd,CACHC,KAAM,SAASC,UACPC,OAASC,KAAKC,MAAMH,YAClBI,OAASP,QAAQI,OAAOI,gBAC1BC,cAAgBC,SAASC,eAAe,wBAC5CJ,OAAOK,IAAI,CACPA,IAAKR,OAAOQ,IACZC,KAAM,0BAETN,OAAOO,mBAAmB,CACxBC,uBAAuB,IAEvB,MAAON,gBACNA,cAAcO,iBAAmB,aAEjCP,cAAcQ,iBAAiB,kBAAkB,WAC7CnB,EAAE,mBAAmBoB,IAAIT,cAAcU,SAASC,QAAQ,QAGhEb,OAAOc,GAAG,SAAS,eACXC,YAAcf,OAAOgB,cACrBC,cAAgBjB,OAAOY,WACRlB,KAAKwB,KAAK,CAAC,CACtBC,WAAY,oBACZvB,KAAM,CACFwB,SAASvB,OAAOwB,GAChBC,SAASzB,OAAO0B,OAChBX,SAASK,cACTF,YAAaA,YACbS,MAAM,YAGL,GAAGC,MAAK,eACdC,MAAK"}